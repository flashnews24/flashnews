<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ² | Ø£Ø®Ø¨Ø§Ø± Ø¹Ø§Ø¬Ù„Ø© Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: 'Cairo', sans-serif;
      background-color: #fdfdfd;
      color: #222;
      transition: background 0.3s, color 0.3s;
    }

    body.dark {
      background-color: #121212;
      color: #f0f0f0;
    }

    header {
      background: linear-gradient(90deg, #5a2a82, #36d7b7);
      padding: 25px 20px;
      text-align: center;
      color: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    header img {
      height: 90px;
      max-width: 200px;
      margin-bottom: 10px;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background-color: white;
      border-bottom: 1px solid #eee;
      box-shadow: 0 2px 6px rgba(0,0,0,0.04);
    }

    nav a {
      padding: 12px 15px;
      text-decoration: none;
      color: #5a2a82;
      font-weight: bold;
      transition: color 0.3s;
    }

    nav a:hover {
      color: #36d7b7;
    }

    .container {
      max-width: 1000px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .news-card {
      background: white;
      margin-bottom: 20px;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.04);
      transition: 0.3s;
    }

    .news-card:hover {
      box-shadow: 0 0 20px rgba(0,0,0,0.08);
    }

    .news-card h3 {
      margin: 0 0 8px;
      font-size: 1.1rem;
      color: #333;
    }

    .news-card img.thumb {
      width: 100%;
      max-height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .news-card small {
      color: #666;
      font-size: 0.85rem;
    }

    .news-card .actions {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }

    .news-card .actions a {
      color: #36d7b7;
      text-decoration: none;
    }

    .fav-btn {
      font-size: 1.2rem;
      cursor: pointer;
      color: #ccc;
    }

    .fav-btn.active {
      color: gold;
    }

    .controls, .filters {
      text-align: center;
      margin: 15px 0;
    }

    .controls button, .filters button {
      margin: 5px;
      padding: 8px 12px;
      border: none;
      background: #36d7b7;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .controls button:hover, .filters button:hover {
      background: #2cb4a0;
    }

    input[type="search"] {
      width: 90%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin: 10px auto;
      display: block;
      font-size: 1rem;
    }

    .ticker {
      background-color: #f7f7f7;
      padding: 10px;
      overflow: hidden;
      white-space: nowrap;
      box-shadow: inset 0 -1px 0 rgba(0,0,0,0.1);
    }

    .ticker span {
      display: inline-block;
      padding-left: 100%;
      animation: scroll 25s linear infinite;
    }

    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    @media (max-width: 600px) {
      header img { height: 60px; }
      .news-card h3 { font-size: 1rem; }
    }

    body.dark .news-card {
      background-color: #1e1e1e;
    }

    body.dark nav {
      background: #222;
    }

    body.dark nav a {
      color: #ccc;
    }

    body.dark nav a:hover {
      color: #36d7b7;
    }

    body.dark input[type="search"] {
      background: #2a2a2a;
      color: #fff;
      border: 1px solid #555;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Ø´Ø¹Ø§Ø± ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ²" />
    <h1>ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ²</h1>
    <div>
      <button onclick="toggleTheme()">ğŸŒ“ Ø§Ù„ÙˆØ¶Ø¹</button>
      <button onclick="toggleLang()">
        ğŸŒ <span id="lang-label">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
      </button>
    </div>
  </header>

  <!-- âœ… Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù…ØªØ­Ø±Ùƒ -->
  <div class="ticker"><span id="ticker-text">ØªØ­Ù…ÙŠÙ„ Ø¢Ø®Ø± Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†...</span></div>

  <!-- âœ… ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
  <div class="controls">
    <button onclick="filterByCategory('all')">ğŸ“‹ Ø§Ù„ÙƒÙ„</button>
    <button onclick="filterByCategory('global')">ğŸŒ Ø¹Ø§Ù„Ù…ÙŠ</button>
    <button onclick="filterByCategory('local')">ğŸ  Ù…Ø­Ù„ÙŠ</button>
    <button onclick="filterByCategory('economy')">ğŸ’¼ Ø§Ù‚ØªØµØ§Ø¯</button>
    <button onclick="filterByCategory('sports')">âš½ Ø±ÙŠØ§Ø¶Ø©</button>
    <button onclick="filterByCategory('tech')">ğŸ’» ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</button>
  </div>

  <!-- âœ… ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…ØµØ¯Ø± -->
  <div class="filters" id="source-filters">
    <!-- ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø§Ù„Ø³ÙƒØ±Ø¨Øª -->
  </div>

  <!-- âœ… Ø®Ø§Ù†Ø© Ø§Ù„Ø¨Ø­Ø« -->
  <input type="search" id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¨Ø±..." oninput="searchNews()" />

  <!-- âœ… Ø§Ù„Ø£Ø®Ø¨Ø§Ø± -->
  <div class="container" id="news-container">
    <p>ğŸ“¡ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...</p>
  </div>
<script>
const sources = [
  {
    name: "Ø§Ù„Ø¬Ø²ÙŠØ±Ø©",
    logo: "https://upload.wikimedia.org/wikipedia/ar/0/0b/Aljazeera_net_logo.png",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.aljazeera.net/aljazeera/rss"
  },
  {
    name: "Ø³ÙƒØ§ÙŠ Ù†ÙŠÙˆØ² Ø¹Ø±Ø¨ÙŠØ©",
    logo: "https://upload.wikimedia.org/wikipedia/ar/thumb/d/d7/Sky_News_Arabia_Logo.svg/320px-Sky_News_Arabia_Logo.svg.png",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.skynewsarabia.com/web/rss/latest"
  },
  {
    name: "BBC Arabic",
    logo: "https://upload.wikimedia.org/wikipedia/commons/7/7c/BBC_News_Arabic.svg",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=http://www.bbc.co.uk/arabic/index.xml"
  },
  {
    name: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
    logo: "https://upload.wikimedia.org/wikipedia/commons/1/1b/AlArabiya.svg",
    category: "economy",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.alarabiya.net/.mrss/ar.xml"
  },
  {
    name: "Ø§Ù„Ø´Ø±Ù‚",
    logo: "https://upload.wikimedia.org/wikipedia/commons/c/ce/Asharq_News_logo.png",
    category: "economy",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.asharq.com/ar/rss"
  }
];

let allNews = [];
let currentLang = navigator.language.startsWith('en') ? 'en' : 'ar';

const translations = {
  ar: {
    "new": "ğŸ†• Ø¬Ø¯ÙŠØ¯",
    "share": "Ù…Ø´Ø§Ø±ÙƒØ©",
    "readMore": "Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ø²ÙŠØ¯",
    "copied": "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·",
    "search": "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¨Ø±..."
  },
  en: {
    "new": "ğŸ†• New",
    "share": "Share",
    "readMore": "Read More",
    "copied": "Link copied",
    "search": "Search news..."
  }
};

function t(key) {
  return translations[currentLang][key] || key;
}

function toggleTheme() {
  document.body.classList.toggle('dark');
}

function toggleLang() {
  currentLang = currentLang === 'ar' ? 'en' : 'ar';
  document.documentElement.lang = currentLang;
  document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
  document.getElementById("lang-label").innerText = currentLang === 'ar' ? "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" : "English";
  loadNews(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø¨Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
}

function fetchNews() {
  allNews = [];
  const container = document.getElementById('news-container');
  container.innerHTML = '<p>ğŸ“¡ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...</p>';

  sources.forEach(source => {
    fetch(source.url).then(res => res.json()).then(data => {
      const items = data.items.slice(0, 5).map(item => ({
        ...item,
        source: source.name,
        category: source.category,
        logo: source.logo,
        lang: source.lang,
        time: new Date(item.pubDate),
        id: item.guid || item.link,
        thumbnail: item.thumbnail || item.enclosure?.link || ""
      }));
      allNews.push(...items);
      renderNews();
    });
  });
}

function renderNews() {
  const container = document.getElementById('news-container');
  const ticker = document.getElementById('ticker-text');
  container.innerHTML = '';
  ticker.innerText = allNews.slice(0, 5).map(n => n.title).join(' | ');

  const filterCat = currentFilter || 'all';
  const filterSource = currentSource || 'all';
  const searchText = document.getElementById('search').value.toLowerCase();

  let filtered = allNews.filter(n => {
    const inCat = (filterCat === 'all' || n.category === filterCat);
    const inSource = (filterSource === 'all' || n.source === filterSource);
    const inSearch = n.title.toLowerCase().includes(searchText);
    return inCat && inSource && inSearch;
  });

  filtered.sort((a, b) => b.time - a.time); // Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹

  filtered.forEach(item => {
    const card = document.createElement('div');
    card.className = 'news-card';

    const isNew = (Date.now() - item.time.getTime()) < 3600000;
    const isFav = localStorage.getItem(item.id);

    card.innerHTML = `
      ${item.thumbnail ? `<img src="${item.thumbnail}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±" class="thumb" />` : ""}
      <h3>
        <img src="${item.logo}" class="source-logo" style="height:18px;margin-left:5px;" />
        ${item.title} ${isNew ? `<span style="color:red;">${t("new")}</span>` : ""}
      </h3>
      <small>ğŸ“… ${item.time.toLocaleDateString()} â° ${item.time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</small>
      <p>${item.description?.slice(0, 150)}...</p>
      <div class="actions">
        <a href="${item.link}" target="_blank">ğŸ”— ${t("readMore")}</a>
        <span class="fav-btn ${isFav ? 'active' : ''}" onclick="toggleFav('${item.id}', this)">â­</span>
        <button onclick="share('${item.link}')">${t("share")}</button>
      </div>
    `;
    container.appendChild(card);
  });

  // Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØµØ§Ø¯Ø±
  const sourcesEl = document.getElementById("source-filters");
  sourcesEl.innerHTML = `<button onclick="filterBySource('all')">ğŸ“¡ Ø§Ù„ÙƒÙ„</button>`;
  const unique = [...new Set(allNews.map(n => n.source))];
  unique.forEach(s => {
    sourcesEl.innerHTML += `<button onclick="filterBySource('${s}')">${s}</button>`;
  });
}

function toggleFav(id, el) {
  if (localStorage.getItem(id)) {
    localStorage.removeItem(id);
    el.classList.remove("active");
  } else {
    localStorage.setItem(id, "true");
    el.classList.add("active");
  }
}

function share(link) {
  navigator.clipboard.writeText(link);
  alert(t("copied"));
}

let currentFilter = 'all';
let currentSource = 'all';

function filterByCategory(cat) {
  currentFilter = cat;
  renderNews();
}

function filterBySource(src) {
  currentSource = src;
  renderNews();
}

function searchNews() {
  renderNews();
}

// ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
setInterval(fetchNews, 60000);

// ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ Ù…Ø±Ø©
window.onload = () => {
  document.getElementById("lang-label").innerText = currentLang === 'ar' ? "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" : "English";
  fetchNews();
};
</script>
  <footer style="text-align:center; padding:20px; color:#666; font-size:0.9rem;">
    Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ² 2025 | FlashNews
  </footer>
</body>
</html>
