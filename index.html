<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ² | Ø£Ø®Ø¨Ø§Ø± Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: 'Cairo', sans-serif;
      background-color: #ffffff;
      color: #222;
      transition: background 0.3s, color 0.3s;
    }

    body.dark {
      background-color: #121212;
      color: #f0f0f0;
    }

    header {
      background: linear-gradient(90deg, #5a2a82, #36d7b7);
      padding: 20px;
      text-align: center;
      color: white;
    }

    header img {
      height: 80px;
      margin-bottom: 10px;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    nav a {
      padding: 12px 15px;
      text-decoration: none;
      color: #5a2a82;
      font-weight: bold;
      transition: color 0.3s;
    }

    nav a:hover {
      color: #36d7b7;
    }

    .container {
      max-width: 900px;
      margin: 20px auto;
      padding: 0 20px;
    }

    .news-card {
      background: #fdfdfd;
      margin-bottom: 15px;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      transition: 0.3s;
    }

    .news-card:hover {
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }

    .news-card h3 {
      margin: 0 0 10px;
      color: #4a148c;
    }

    .news-card p {
      margin: 0;
    }

    .ticker {
      background-color: #f0f0f0;
      padding: 10px;
      overflow: hidden;
      white-space: nowrap;
      box-shadow: inset 0 -1px 0 rgba(0,0,0,0.1);
    }

    .ticker span {
      display: inline-block;
      padding-left: 100%;
      animation: scroll 20s linear infinite;
    }

    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .controls {
      text-align: center;
      margin: 10px 0;
    }

    .controls button {
      margin: 5px;
      padding: 8px 12px;
      border: none;
      background: #36d7b7;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .controls button:hover {
      background: #2cb4a0;
    }

    input[type="search"] {
      width: 90%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin: 10px auto;
      display: block;
      font-size: 1rem;
    }

    .fav-btn {
      float: left;
      font-size: 1.2rem;
      cursor: pointer;
      color: #ccc;
    }

    .fav-btn.active {
      color: gold;
    }

    .source-logo {
      height: 18px;
      vertical-align: middle;
      margin-left: 5px;
    }

    body.dark .news-card {
      background-color: #1e1e1e;
    }

    body.dark nav {
      background: #222;
    }

    body.dark nav a {
      color: #ccc;
    }

    body.dark nav a:hover {
      color: #36d7b7;
    }

    body.dark input[type="search"] {
      background: #2a2a2a;
      color: #fff;
      border: 1px solid #555;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Ø´Ø¹Ø§Ø± ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ²" />
    <h1>ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ²</h1>
  </header>

  <!-- âœ… Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù…ØªØ­Ø±Ùƒ -->
  <div class="ticker"><span id="ticker-text">ØªØ­Ù…ÙŠÙ„ Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...</span></div>

  <!-- âœ… Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„ØªØµÙ†ÙŠÙØ§Øª -->
  <div class="controls">
    <button onclick="toggleTheme()">ğŸŒ“ Ø§Ù„ÙˆØ¶Ø¹</button>
    <button onclick="filterNews('all')">Ø§Ù„ÙƒÙ„</button>
    <button onclick="filterNews('global')">Ø¹Ø§Ù„Ù…ÙŠ</button>
    <button onclick="filterNews('local')">Ù…Ø­Ù„ÙŠ</button>
    <button onclick="filterNews('economy')">Ø§Ù‚ØªØµØ§Ø¯</button>
    <button onclick="filterNews('sports')">Ø±ÙŠØ§Ø¶Ø©</button>
    <button onclick="filterNews('tech')">ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</button>
  </div>

  <!-- âœ… Ø®Ø§Ù†Ø© Ø§Ù„Ø¨Ø­Ø« -->
  <input type="search" id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¨Ø±..." oninput="searchNews()" />

  <!-- âœ… Ø§Ù„Ø£Ø®Ø¨Ø§Ø± -->
  <div class="container" id="news-container">
    <p>ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...</p>
  </div>
<script>
const sources = [
  {
    name: "Ø§Ù„Ø¬Ø²ÙŠØ±Ø©",
    logo: "https://upload.wikimedia.org/wikipedia/commons/6/69/Aljazeera_English_logo.svg",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.aljazeera.net/aljazeera/rss"
  },
  {
    name: "BBC Arabic",
    logo: "https://upload.wikimedia.org/wikipedia/commons/7/7c/BBC_News_Arabic.svg",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=http://www.bbc.co.uk/arabic/index.xml"
  },
  {
    name: "Sky News",
    logo: "https://upload.wikimedia.org/wikipedia/commons/4/4e/Sky-news-logo.png",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.skynewsarabia.com/web/rss/latest"
  },
  {
    name: "CNN (EN)",
    logo: "https://upload.wikimedia.org/wikipedia/commons/b/b1/CNN.svg",
    category: "global",
    lang: "en",
    url: "https://api.rss2json.com/v1/api.json?rss_url=http://rss.cnn.com/rss/edition.rss"
  },
  {
    name: "Reuters (EN)",
    logo: "https://upload.wikimedia.org/wikipedia/commons/7/75/Reuters-Logo.svg",
    category: "economy",
    lang: "en",
    url: "https://api.rss2json.com/v1/api.json?rss_url=http://feeds.reuters.com/reuters/topNews"
  }
];

const translateWords = {
  "breaking": "Ø¹Ø§Ø¬Ù„", "explosion": "Ø§Ù†ÙØ¬Ø§Ø±", "president": "Ø±Ø¦ÙŠØ³", "election": "Ø§Ù†ØªØ®Ø§Ø¨Ø§Øª",
  "attack": "Ù‡Ø¬ÙˆÙ…", "earthquake": "Ø²Ù„Ø²Ø§Ù„", "killed": "Ù…Ù‚ØªÙ„", "dead": "ÙˆÙØ§Ø©",
  "fire": "Ø­Ø±ÙŠÙ‚", "protest": "Ø§Ø­ØªØ¬Ø§Ø¬", "storm": "Ø¹Ø§ØµÙØ©", "deal": "Ø§ØªÙØ§Ù‚",
  "covid": "ÙƒÙˆØ±ÙˆÙ†Ø§", "market": "Ø§Ù„Ø³ÙˆÙ‚", "war": "Ø­Ø±Ø¨", "crisis": "Ø£Ø²Ù…Ø©"
};

const container = document.getElementById("news-container");
const ticker = document.getElementById("ticker-text");
let allNews = [];

function simpleTranslate(text) {
  let words = text.toLowerCase().split(" ");
  let translated = words.map(w => translateWords[w] || "").filter(Boolean);
  return translated.length ? translated.join(" - ") : "";
}

function loadNews() {
  container.innerHTML = "";
  ticker.textContent = "ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...";
  allNews = [];

  sources.forEach(source => {
    fetch(source.url)
      .then(res => res.json())
      .then(data => {
        let items = data.items.slice(0, 5).map(item => ({
          title: item.title,
          link: item.link,
          source: source.name,
          category: source.category,
          logo: source.logo,
          translated: source.lang === "en" ? simpleTranslate(item.title) : "",
          id: item.guid || item.link
        }));

        allNews.push(...items);
        displayNews(allNews);
        updateTicker();
      })
      .catch(() => {
        console.warn(`ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù…Ù† ${source.name}`);
      });
  });
}

function displayNews(newsArray) {
  container.innerHTML = "";
  newsArray.forEach(item => {
    const card = document.createElement("div");
    card.className = "news-card";
    card.setAttribute("data-category", item.category);

    const isFav = localStorage.getItem(item.id);

    card.innerHTML = `
      <h3>
        <img src="${item.logo}" class="source-logo" alt=""> ${item.title}
        ${item.translated ? `<br><small>ğŸ“ ${item.translated}</small>` : ""}
      </h3>
      <p>
        <a href="${item.link}" target="_blank">Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø¨Ø± ğŸ”—</a>
        <span class="fav-btn ${isFav ? 'active' : ''}" onclick="toggleFav('${item.id}', this)">â­</span>
      </p>
    `;
    container.appendChild(card);
  });
}

function updateTicker() {
  ticker.textContent = allNews.slice(0, 10).map(n => n.title).join(" | ");
}

function toggleFav(id, el) {
  if (localStorage.getItem(id)) {
    localStorage.removeItem(id);
    el.classList.remove("active");
  } else {
    localStorage.setItem(id, "true");
    el.classList.add("active");
  }
}

function toggleTheme() {
  document.body.classList.toggle("dark");
}

function filterNews(type) {
  if (type === "all") {
    displayNews(allNews);
  } else {
    const filtered = allNews.filter(n => n.category === type);
    displayNews(filtered);
  }
}

function searchNews() {
  const query = document.getElementById("search").value.toLowerCase();
  const results = allNews.filter(n =>
    n.title.toLowerCase().includes(query) ||
    (n.translated && n.translated.toLowerCase().includes(query))
  );
  displayNews(results);
}

window.onload = loadNews;
</script>
  <footer style="text-align:center; padding:20px; color:#666;">
    Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ² 2025
  </footer>
</body>
</html>
