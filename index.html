<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ² | Ø£Ø®Ø¨Ø§Ø± Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©</title>

  <!-- âœ… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />

  <!-- âœ… Ø®Ø· Tajawal -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700;800&display=swap" rel="stylesheet" />

  <!-- âœ… ØªÙ†Ø³ÙŠÙ‚Ø§Øª NewsFeed Lite (Ù…Ø¹Ø¯Ù„Ø© Ù„ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ²) -->
  <style>
    :root {
      --primary-color: #5a2a82;
      --accent-color: #36d7b7;
      --bg-light: #fdfdfd;
      --bg-dark: #121212;
      --text-dark: #222;
      --text-light: #f0f0f0;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Tajawal', sans-serif;
      background-color: var(--bg-light);
      color: var(--text-dark);
      transition: background 0.3s, color 0.3s;
    }

    body.dark {
      background-color: var(--bg-dark);
      color: var(--text-light);
    }

    header {
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
      padding: 25px 15px;
      color: white;
      text-align: center;
    }

    header img {
      height: 80px;
      margin-bottom: 10px;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background-color: white;
      border-bottom: 1px solid #ddd;
      box-shadow: 0 2px 4px rgba(0,0,0,0.04);
    }

    nav a {
      padding: 12px 15px;
      text-decoration: none;
      color: var(--primary-color);
      font-weight: bold;
      transition: color 0.3s;
    }

    nav a:hover {
      color: var(--accent-color);
    }

    .ticker {
      background-color: #fafafa;
      padding: 10px;
      overflow: hidden;
      white-space: nowrap;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
    }

    .ticker span {
      display: inline-block;
      padding-left: 100%;
      animation: scroll 25s linear infinite;
    }

    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .controls {
      text-align: center;
      margin: 15px 0;
    }

    .controls button {
      margin: 5px;
      padding: 8px 14px;
      border: none;
      background: var(--accent-color);
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }

    .controls button:hover {
      background: #27b6a3;
    }

    input[type="search"] {
      width: 90%;
      max-width: 600px;
      padding: 10px;
      margin: 10px auto;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
      display: block;
    }

    body.dark nav {
      background-color: #1a1a1a;
    }

    body.dark nav a {
      color: #ccc;
    }

    body.dark nav a:hover {
      color: var(--accent-color);
    }

    body.dark input[type="search"] {
      background-color: #2a2a2a;
      color: white;
      border: 1px solid #555;
    }
  </style>
</head>
<body>
  <!-- âœ… Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
  <header>
    <img src="logo.png" alt="Ø´Ø¹Ø§Ø± ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ²" />
    <h1>ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ²</h1>
    <div style="margin-top:10px;">
      <button onclick="toggleTheme()">ğŸŒ“ Ø§Ù„ÙˆØ¶Ø¹</button>
      <button onclick="toggleLang()">ğŸŒ <span id="lang-label">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span></button>
    </div>
  </header>

  <!-- âœ… Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù…ØªØ­Ø±Ùƒ -->
  <div class="ticker">
    <span id="ticker-text">ğŸ“¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†...</span>
  </div>

  <!-- âœ… Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
  <div class="controls">
    <button onclick="filterByCategory('all')">ğŸ“‹ Ø§Ù„ÙƒÙ„</button>
    <button onclick="filterByCategory('global')">ğŸŒ Ø¹Ø§Ù„Ù…ÙŠ</button>
    <button onclick="filterByCategory('local')">ğŸ  Ù…Ø­Ù„ÙŠ</button>
    <button onclick="filterByCategory('economy')">ğŸ’¼ Ø§Ù‚ØªØµØ§Ø¯</button>
    <button onclick="filterByCategory('sports')">âš½ Ø±ÙŠØ§Ø¶Ø©</button>
    <button onclick="filterByCategory('tech')">ğŸ’» ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</button>
  </div>

  <!-- âœ… ÙÙ„Ø§ØªØ± Ø§Ù„Ù…ØµØ¯Ø± -->
  <div class="controls" id="source-filters">
    <!-- ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
  </div>

  <!-- âœ… Ø®Ø§Ù†Ø© Ø§Ù„Ø¨Ø­Ø« -->
  <input type="search" id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¨Ø±..." oninput="searchNews()" />

  <!-- âœ… Ù…ÙƒØ§Ù† Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± -->
  <div class="container" id="news-container">
    <p style="text-align:center;">ğŸ“° ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø¢Ù†...</p>
  </div>
<script>
const sources = [
  {
    name: "Ø§Ù„Ø¬Ø²ÙŠØ±Ø©",
    logo: "https://upload.wikimedia.org/wikipedia/ar/0/0b/Aljazeera_net_logo.png",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.aljazeera.net/aljazeera/rss"
  },
  {
    name: "Ø³ÙƒØ§ÙŠ Ù†ÙŠÙˆØ² Ø¹Ø±Ø¨ÙŠØ©",
    logo: "https://upload.wikimedia.org/wikipedia/ar/thumb/d/d7/Sky_News_Arabia_Logo.svg/320px-Sky_News_Arabia_Logo.svg.png",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.skynewsarabia.com/web/rss/latest"
  },
  {
    name: "BBC Arabic",
    logo: "https://upload.wikimedia.org/wikipedia/commons/7/7c/BBC_News_Arabic.svg",
    category: "global",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=http://www.bbc.co.uk/arabic/index.xml"
  },
  {
    name: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
    logo: "https://upload.wikimedia.org/wikipedia/commons/1/1b/AlArabiya.svg",
    category: "economy",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.alarabiya.net/.mrss/ar.xml"
  },
  {
    name: "Ø§Ù„Ø´Ø±Ù‚",
    logo: "https://upload.wikimedia.org/wikipedia/commons/c/ce/Asharq_News_logo.png",
    category: "economy",
    lang: "ar",
    url: "https://api.rss2json.com/v1/api.json?rss_url=https://www.asharq.com/ar/rss"
  }
];

let allNews = [];
let currentLang = navigator.language.startsWith('en') ? 'en' : 'ar';

function toggleTheme() {
  document.body.classList.toggle("dark");
}

function toggleLang() {
  currentLang = currentLang === 'ar' ? 'en' : 'ar';
  document.documentElement.lang = currentLang;
  document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
  document.getElementById("lang-label").innerText = currentLang === 'ar' ? "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" : "English";
  renderNews();
}

function fetchNews() {
  const container = document.getElementById("news-container");
  container.innerHTML = '<p>ğŸ“¡ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...</p>';
  allNews = [];

  sources.forEach(source => {
    fetch(source.url).then(res => res.json()).then(data => {
      const items = data.items.map(item => ({
        ...item,
        source: source.name,
        category: source.category,
        logo: source.logo,
        lang: source.lang,
        time: new Date(item.pubDate),
        id: item.guid || item.link,
        thumbnail: item.thumbnail || item.enclosure?.link || ""
      }));
      allNews.push(...items);
      renderNews();
    });
  });
}

let currentCategory = "all";
let currentSource = "all";

function filterByCategory(cat) {
  currentCategory = cat;
  renderNews();
}

function filterBySource(src) {
  currentSource = src;
  renderNews();
}

function searchNews() {
  renderNews();
}

function renderNews() {
  const container = document.getElementById("news-container");
  const ticker = document.getElementById("ticker-text");
  container.innerHTML = "";

  const searchText = document.getElementById("search").value.toLowerCase();

  let filtered = allNews.filter(n => {
    const inCat = currentCategory === "all" || n.category === currentCategory;
    const inSource = currentSource === "all" || n.source === currentSource;
    const inSearch = n.title.toLowerCase().includes(searchText);
    return inCat && inSource && inSearch;
  });

  filtered.sort((a, b) => b.time - a.time);

  ticker.innerText = filtered.slice(0, 5).map(n => n.title).join(" | ");

  // Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙÙ„Ø§ØªØ±
  const filters = document.getElementById("source-filters");
  filters.innerHTML = `<button onclick="filterBySource('all')">ğŸ“¡ Ø§Ù„ÙƒÙ„</button>`;
  [...new Set(allNews.map(n => n.source))].forEach(src => {
    filters.innerHTML += `<button onclick="filterBySource('${src}')">${src}</button>`;
  });

  filtered.forEach(item => {
    const card = document.createElement("div");
    card.className = "news-card";

    const isNew = (Date.now() - item.time.getTime()) < 3600000;
    const isFav = localStorage.getItem(item.id);

    card.innerHTML = `
      ${item.thumbnail ? `<img src="${item.thumbnail}" class="thumb" alt="ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±">` : ""}
      <h3 style="font-family:'Tajawal',sans-serif;font-weight:800;font-size:1.3rem;color:#4a148c;">
        <img src="${item.logo}" alt="" class="source-logo" style="height:18px;vertical-align:middle;margin-left:5px;" />
        ${item.title} ${isNew ? "<span style='color:red;'>ğŸ†•</span>" : ""}
      </h3>
      <small>ğŸ“… ${item.time.toLocaleDateString()} â° ${item.time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</small>
      <p>${item.description?.slice(0, 150)}...</p>
      <div class="actions">
        <a href="${item.link}" target="_blank">ğŸ”— Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ø²ÙŠØ¯</a>
        <span class="fav-btn ${isFav ? 'active' : ''}" onclick="toggleFav('${item.id}', this)">â­</span>
        <button onclick="navigator.clipboard.writeText('${item.link}'); alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·')">ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ©</button>
      </div>
    `;
    container.appendChild(card);
  });
}

function toggleFav(id, el) {
  if (localStorage.getItem(id)) {
    localStorage.removeItem(id);
    el.classList.remove("active");
  } else {
    localStorage.setItem(id, "true");
    el.classList.add("active");
  }
}

// ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
setInterval(fetchNews, 60000);
window.onload = () => {
  document.getElementById("lang-label").innerText = currentLang === 'ar' ? "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" : "English";
  fetchNews();
};
</script>
  <!-- âœ… Ø§Ù„ÙÙˆØªØ± -->
  <footer style="text-align:center; padding: 20px; color:#666; font-size: 0.9rem;">
    Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© ÙÙ„Ø§Ø´ Ù†ÙŠÙˆØ² 2025 | FlashNews
  </footer>

</body>
</html>
